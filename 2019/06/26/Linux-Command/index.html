<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/header.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/header.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/header.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":null},
    back2top: {"enable":true,"sidebar":false,"b2t":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="运维过程中所接触到的 Linux 命令">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 命令记录">
<meta property="og:url" content="http://yoursite.com/2019/06/26/Linux-Command/index.html">
<meta property="og:site_name" content="lihuimintu">
<meta property="og:description" content="运维过程中所接触到的 Linux 命令">
<meta property="og:image" content="http://yoursite.com/images/blog/2019-07-26-1.png">
<meta property="og:image" content="http://yoursite.com/images/blog/2019-07-26-2.png">
<meta property="og:image" content="http://yoursite.com/images/blog/2019-07-26-3.png">
<meta property="og:image" content="http://yoursite.com/images/blog/2019-07-26-4.png">
<meta property="og:image" content="http://yoursite.com/images/blog/2019-07-26-5.png">
<meta property="og:image" content="http://yoursite.com/images/blog/2019-08-27-1.png">
<meta property="og:image" content="http://yoursite.com/images/blog/2019-11-30-1.png">
<meta property="article:published_time" content="2019-06-25T16:00:00.000Z">
<meta property="article:modified_time" content="2020-02-03T10:02:20.092Z">
<meta property="article:author" content="图">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/images/blog/2019-07-26-1.png">

<link rel="canonical" href="http://yoursite.com/2019/06/26/Linux-Command/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Linux 命令记录 | lihuimintu</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="lihuimintu" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">lihuimintu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/26/Linux-Command/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zzh.jpg">
      <meta itemprop="name" content="图">
      <meta itemprop="description" content="Life isn't always what one likes.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lihuimintu">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux 命令记录
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-26 00:00:00" itemprop="dateCreated datePublished" datetime="2019-06-26T00:00:00+08:00">2019-06-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-03 18:02:20" itemprop="dateModified" datetime="2020-02-03T18:02:20+08:00">2020-02-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>12k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>11 分钟</span>
            </span>
            <div class="post-description">运维过程中所接触到的 Linux 命令</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>运维过程中所接触到的 Linux 命令</p>
<hr>
<h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>话说搞运维的人没有两把“刷子”，都不好意思上服务器操作。</p>
<p>因此想总结下自己运维过程中所接触到的 Linux 命令</p>
<p>不会记录的很详细。想到记录什么就记录什么。</p>
<h4 id="lsb-release"><a href="#lsb-release" class="headerlink" title="lsb_release"></a>lsb_release</h4><p>查看Linux系统版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@massive-dataset-new-005 ~]# lsb_release -a</span><br><span class="line">LSB Version:    :base-4.0-amd64:base-4.0-noarch:core-4.0-amd64:core-4.0-noarch:graphics-4.0-amd64:graphics-4.0-noarch</span><br><span class="line">Distributor ID: CentOS</span><br><span class="line">Description:    CentOS release 6.5 (Final)</span><br><span class="line">Release:        6.5</span><br><span class="line">Codename:       Final</span><br></pre></td></tr></table></figure>

<p>当然，还可以直接查看文件看，CentOS下查看<code>/etc/redhat-release</code></p>
<h4 id="uname"><a href="#uname" class="headerlink" title="uname"></a>uname</h4><p>查看Linux内核版本命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@massive-dataset-new-005 ~]# uname -a</span><br><span class="line">Linux massive-dataset-new-005 2.6.32-696.16.1.el6.x86_64 #1 SMP Wed Nov 15 16:51:15 UTC 2017 x86_64 x86_64 x86_64 GNU&#x2F;Linux</span><br></pre></td></tr></table></figure>

<h4 id="crontab"><a href="#crontab" class="headerlink" title="crontab"></a>crontab</h4><p>查看某个用户的 cron 任务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -u username -l</span><br></pre></td></tr></table></figure>

<p>查看所有用户的 cron 任务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 以root用户执行</span><br><span class="line">cat &#x2F;etc&#x2F;passwd | cut -f 1 -d : |xargs -I &#123;&#125; crontab -l -u &#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="bc"><a href="#bc" class="headerlink" title="bc"></a>bc</h4><p>bc命令是一种支持任意精度的交互执行的计算器语言。是Linux简单的计算器,能进行进制转换与计算。</p>
<p>执行浮点运算</p>
<p>参数 scale=3 是将bc输出结果的小数位设置为3位</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;scale&#x3D;3;10&#x2F;3&quot; | bc</span><br><span class="line">3.333</span><br></pre></td></tr></table></figure>

<p>进制转换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;obase&#x3D;2;$255&quot; | bc</span><br><span class="line">11111111</span><br></pre></td></tr></table></figure>

<h4 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h4><p>查进程有两个命令</p>
<ul>
<li>ps -ef</li>
<li>ps aux</li>
</ul>
<p>上面两个命令都是列出所有的进程，还是通过 &#124; 管道和 grep 来过滤掉想要查的进程</p>
<p>比如说 <code>ps -ef | grep java</code></p>
<p>把进程查出来干嘛？知道它的进程ID了，可以把他给杀掉</p>
<p>kill -9 processId 杀掉某个进程</p>
<h4 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h4><p>查端口也是一个很常见的操作</p>
<p>常见命令  <code>netstat -lntup</code></p>
<p>查看当前所有 tcp/udp 端口的信息</p>
<h4 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h4><p>查看某个端口详细的信息 <code>lsof -i:4000</code></p>
<h4 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h4><p>最常用的 tail -f</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -300f shopbase.log # 倒数300行并进入实时监听文件写入模式</span><br></pre></td></tr></table></figure>

<h4 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h4><p>在文件中搜索字符串匹配的行并输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">grep forest f.txt     # 文件查找</span><br><span class="line">grep forest f.txt cpf.txt # 多文件查找</span><br><span class="line">grep &#39;log&#39; &#x2F;home&#x2F;admin -r -n # 目录下查找所有符合关键字的文件</span><br><span class="line">grep ERROR *&#x2F;* 搜索当前路径下所有的文件</span><br><span class="line">cat f.txt | grep -i shopbase  #  -i 不区分大小写	-v 排除指定字符串</span><br><span class="line">grep &#39;shopbase&#39; &#x2F;home&#x2F;admin -r -n --include *.&#123;vm,java&#125; # 指定文件后缀</span><br><span class="line">grep &#39;shopbase&#39; &#x2F;home&#x2F;admin -r -n --exclude *.&#123;vm,java&#125; # 反匹配</span><br><span class="line">seq 10 | grep 5 -A 3    #上匹配  显示匹配后和它后面的3行</span><br><span class="line">seq 10 | grep 5 -B 3    #下匹配  显示匹配行和它前面的3行</span><br><span class="line">seq 10 | grep 5 -C 3    #上下匹配，平时用这个就妥了  匹配行和它前后各3行</span><br><span class="line">cat f.txt | grep -c &#39;SHOPBASE&#39; # -c 统计文件中某字符串的个数</span><br></pre></td></tr></table></figure>

<p>比如在面对比较大的日志文件查看时，用 grep 来更好。</p>
<p><code>grep 13888888888 service.log -C 30 | less</code></p>
<p>这么一搞，就能将 service.log 中所有含有 13888888888 的记录上下 30 行给搜出来，搜索的速度还是贼快的。</p>
<h4 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h4><p>内建变量</p>
<p>NR: NR表示从awk开始执行后，按照记录分隔符读取的数据次数，默认的记录分隔符为换行符<br>因此<strong>默认的就是读取的数据行数</strong>，NR可以理解为Number of Record的缩写。</p>
<p>FNR: 在awk处理多个输入文件的时候，在处理完第一个文件后，NR并不会从1开始，而是继续累加<br>因此就出现了FNR，每当处理一个新文件的时候，FNR就从1开始计数，FNR可以理解为File Number of Record。</p>
<p>NF: NF表示目前的行记录用分割符分割的字段的数目，NF可以理解为Number of Field。</p>
<p>基本命令<br>默认分隔符为空白字符(tab、空格)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">awk &#39;&#123;print $4,$6&#125;&#39; f.txt  # 第4、5列</span><br><span class="line">awk &#39;&#123;print NR,$0&#125;&#39; f.txt cpf.txt   # 以行号输出，行号累加、$0 表示整行、多个文件</span><br><span class="line">awk &#39;&#123;print FNR,$0&#125;&#39; f.txt cpf.txt # 每个文件的行号从1开始计算</span><br><span class="line">awk &#39;&#123;print FNR,FILENAME,$0&#125;&#39; f.txt cpf.txt  # FILENAME 多文件匹配时输出该行所在的文件名</span><br><span class="line">awk &#39;&#123;print FILENAME,&quot;NR&#x3D;&quot;NR,&quot;FNR&#x3D;&quot;FNR,&quot;$&quot;NF&quot;&#x3D;&quot;$NF&#125;&#39; f.txt cpf.txt  # NF 分割字段数</span><br><span class="line">echo 1:2:3:4 | awk -F: &#39;&#123;print $1,$2,$3,$4&#125;&#39; # -F 指定分割符</span><br></pre></td></tr></table></figure>

<p>匹配</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">awk &#39;&#x2F;ldb&#x2F; &#123;print&#125;&#39; f.txt   #匹配ldb</span><br><span class="line">awk &#39;!&#x2F;ldb&#x2F; &#123;print&#125;&#39; f.txt  #不匹配ldb</span><br><span class="line">awk &#39;&#x2F;ldb&#x2F; &amp;&amp; &#x2F;LISTEN&#x2F; &#123;print&#125;&#39; f.txt   #匹配ldb和LISTEN</span><br><span class="line">awk &#39;$5 ~ &#x2F;ldb&#x2F; &#123;print&#125;&#39; f.txt #第五列匹配ldb</span><br></pre></td></tr></table></figure>


<h4 id="find"><a href="#find" class="headerlink" title="find"></a>find</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">sudo -u admin find &#x2F;home&#x2F;admin &#x2F;tmp &#x2F;usr -name &quot;*.log&quot;  (多个目录去找)</span><br><span class="line">find . -iname &quot;*.txt&quot; (大小写都匹配)</span><br><span class="line">find . -type d  (当前目录下的所有子目录)</span><br><span class="line">find &#x2F;usr -type l (目录下所有的符号链接)</span><br><span class="line">find &#x2F;usr -type l -name &quot;z*&quot; (目录下符合z开头的符号链接)</span><br><span class="line">find &#x2F;usr -type l -name &quot;z*&quot; -ls (符号链接的详细信息 eg:inode,目录)</span><br><span class="line">find &#x2F;home&#x2F;admin -size +250000k(超过250000k的文件，当然+改成-就是小于了)</span><br><span class="line">find &#x2F;home&#x2F;admin -tyep f -perm 777 (按照权限查询文件)</span><br><span class="line">find &#x2F;home&#x2F;admin -tyep f -perm 777 -ls (按照权限查询文件)</span><br><span class="line">find &#x2F;home&#x2F;admin -type f -perm 777 -exec ls -l &#123;&#125; \; (按照权限查询文件)</span><br><span class="line">find &#x2F;home&#x2F;admin -atime -1  1天内访问过的文件</span><br><span class="line">find &#x2F;home&#x2F;admin -ctime -1  1天内状态改变过的文件    </span><br><span class="line">find &#x2F;home&#x2F;admin -mtime -1  1天内修改过的文件</span><br><span class="line">find &#x2F;home&#x2F;admin -amin -1  1分钟内访问过的文件</span><br><span class="line">find &#x2F;home&#x2F;admin -cmin -1  1分钟内状态改变过的文件    </span><br><span class="line">find &#x2F;home&#x2F;admin -mmin -1  1分钟内修改过的文件</span><br><span class="line">find &#x2F;home&#x2F;admin -newer while2 -type f -exec ls -l &#123;&#125; \; # 搜索比 while2 文件更新的且类型是普通文件的文件，搜索到时打印该文件的信息</span><br></pre></td></tr></table></figure>

<h4 id="top"><a href="#top" class="headerlink" title="top"></a>top</h4><p>top 命令查看进程的状态</p>
<p><img src="/images/blog/2019-07-26-1.png" alt></p>
<p><strong>第一行: 系统运行时间和平均负载</strong></p>
<p>当前时间、系统已运行时间、当前登录用户的数量、最近5、10、15分钟内的平均负载</p>
<p>其中有个 load average 可能不是那么好理解。</p>
<p>load average: 在特定时间间隔内运行队列中(在CPU上运行或者等待运行多少进程)的平均进程数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">load average 有三个值，分别代表：1分钟、5分钟、15分钟内运行进程队列中的平均进程数量。</span><br><span class="line"></span><br><span class="line">- 正在运行的进程 + 准备好等待运行的进程   在特定时间内（1分钟，5分钟，10分钟）的平均进程数</span><br><span class="line"></span><br><span class="line">load average 数据是每隔5秒钟检查一次活跃的进程数</span><br><span class="line"></span><br><span class="line">Linux进程可以分为三个状态</span><br><span class="line"></span><br><span class="line">- 阻塞进程</span><br><span class="line">- 可运行的进程</span><br><span class="line">- 正在运行的进程</span><br><span class="line"></span><br><span class="line">比如现在系统有2个正在运行的进程，3个可运行进程，那么系统的 load 就是5，load average 就是一定时间内的 load 数量均值。</span><br></pre></td></tr></table></figure>

<p><strong>第二行: 任务</strong></p>
<p>任务的总数、运行中(running)的任务、休眠(sleeping)中的任务、停止(stopped)的任务、僵尸状态(zombie)的任务</p>
<p><strong>第三行: cpu状态</strong></p>
<table>
<thead>
<tr>
<th>字段</th>
<th>字段释义</th>
</tr>
</thead>
<tbody><tr>
<td>us</td>
<td>user: 运行(未调整优先级的) 用户进程的CPU时间</td>
</tr>
<tr>
<td>sy</td>
<td>system: 运行内核进程的CPU时间</td>
</tr>
<tr>
<td>ni</td>
<td>niced: 运行已调整优先级的用户进程的CPU时间</td>
</tr>
<tr>
<td>id</td>
<td>idle: 空闲时间</td>
</tr>
<tr>
<td>wa</td>
<td>IO wait: 用于等待IO完成的CPU时间</td>
</tr>
<tr>
<td>hi</td>
<td>处理硬件中断的CPU时间</td>
</tr>
<tr>
<td>si</td>
<td>处理软件中断的CPU时间</td>
</tr>
<tr>
<td>st</td>
<td>这个虚拟机被 hypervisor 偷去的CPU时间</td>
</tr>
</tbody></table>
<p>注意: 对于st中，如果当前处于一个 hypervisor 下的vm，实际上 hypervisor 也是要消耗一部分CPU处理时间的</p>
<p><strong>第四行: 内存</strong></p>
<p>全部可用内存、已使用内存、空闲内存、缓冲内存</p>
<p><strong>第五行: swap</strong></p>
<p>全部、已使用、空闲和缓冲交换空间</p>
<p><strong>第七行之后</strong></p>
<p>PID  进程ID，进程的唯一标识符</p>
<p>USER  进程所有者的实际用户名</p>
<p>PR  进程的调度优先级。这个字段的一些值是’rt’。这意味这这些进程运行在实时态。</p>
<p>NI  进程的nice值（优先级）。越小的值意味着越高的优先级。负值表示高优先级，正值表示低优先级</p>
<p>VIRT  virtual memory usage 虚拟内存,进程使用的虚拟内存<br>进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES<br>1  进程“需要的”虚拟内存大小，包括进程使用的库、代码、数据等<br>2  假如进程申请100m的内存，但实际只使用了10m，那么它会增长100m，而不是实际的使用量</p>
<p>RES  resident memory usage 常驻内存,驻留内存大小<br>驻留内存是任务使用的非交换物理内存大小。进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA<br>1  进程当前使用的内存大小，但不包括swap out<br>2  包含其他进程的共享<br>3  如果申请100m的内存，实际使用10m，它只增长10m，与VIRT相反<br>4  关于库占用内存的情况，它只统计加载的库文件所占内存大小  </p>
<p>SHR  shared memory 共享内存<br>1  除了自身进程的共享内存，也包括其他进程的共享内存<br>2  虽然进程只使用了几个共享库的函数，但它包含了整个共享库的大小<br>3  计算某个进程所占的物理内存大小公式：RES – SHR<br>4  swap out后，它将会降下来</p>
<p>S  这个是进程的状态</p>
<ul>
<li>D - 不可中断的睡眠态。</li>
<li>R – 运行态</li>
<li>S – 睡眠态</li>
<li>T – 被跟踪或已停止</li>
<li>Z – 僵尸态</li>
</ul>
<p>%CPU  自从上一次更新时到现在任务所使用的CPU时间百分比。<br>%CPU显示的是进程占用一个核的百分比，而不是整个cpu（N核）的百分比，有时候可能大于100，那是因为该进程启用了多线程占用了多个核心，所以有时候我们看该值得时候会超过100%，但不会超过总核数*100</p>
<p>%MEM  进程使用的可用物理内存百分比</p>
<p>TIME+  任务启动后到现在所使用的全部CPU时间，精确到百分之一秒</p>
<p>COMMAND  运行进程所使用的命令。进程名称（命令名/命令行）</p>
<p><strong>交互命令</strong></p>
<p>top 运行中可以通过 top 的内部命令对进程的显示方式进行控制。</p>
<p>按”h”或者”?”, 会显示帮助</p>
<p><img src="/images/blog/2019-07-26-2.png" alt></p>
<p>内部命令如下:   </p>
<ul>
<li>s – 改变画面更新频率 – 常用</li>
<li>M – 以内存占用率大小的顺序排列进程列表 – 常用 </li>
<li>P – 以 CPU 占用率大小的顺序排列进程列表 – 常用</li>
<li>N – 以 PID 的大小的顺序排列表示进程列表 </li>
<li>R - 正常排序/反向排序</li>
<li>l – 关闭或开启第一部分第一行 top 信息的表示</li>
<li>t – 关闭或开启第一部分第二行 Tasks 和第三行 Cpus 信息的表示</li>
<li>m – 关闭或开启第一部分第四行 Mem 和 第五行 Swap 信息的表示</li>
<li>n – 设置在进程列表所显示进程的数量</li>
<li>c - 切换显示命令名称和完整命令行</li>
<li>u - 输入用户，显示用户的任务</li>
<li>i - 忽略闲置和僵死进程, 这是一个开关式命令</li>
<li>1 - 监控每个逻辑CPU的状况 – 常用</li>
<li>q – 退出 top – 常用</li>
</ul>
<p><strong>常用参数与命令</strong></p>
<ul>
<li>d - 指定每两次屏幕信息刷新之间的时间间隔。当然用户可以使用s交互命令来改变之</li>
<li>p - 通过指定监控进程ID来仅仅监控某个进程的状态</li>
<li>H - 设置线程模式。在设置线程模式下，第二行的tasks指的是线程个数</li>
</ul>
<p>配合来查询进程的各种问题了</p>
<p>1 如下显示某个进程所有活跃的线程消耗情况</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep java</span><br><span class="line">top -H -p pid</span><br></pre></td></tr></table></figure>

<p>按f、再按j把P调出来,按回车确认</p>
<p><img src="/images/blog/2019-07-26-3.png" alt></p>
<p>P代表”Last used CPU”， 表示上一次运行在哪个CPU内核上</p>
<p><img src="/images/blog/2019-07-26-4.png" alt></p>
<p>2 排查一些进程内线程状态，<code>top -H -p pid</code>获得线程10进制转16进制后 jstack 去抓看这个线程到底在干啥 <a href="https://lihuimintu.github.io/2019/06/03/Occupying-CPU-high/" target="_blank" rel="noopener">Linux 系统 CPU 过高异常排查</a></p>
<h4 id="free"><a href="#free" class="headerlink" title="free"></a>free</h4><p>查看内存使用状况</p>
<p>包括系统物理内存、虚拟内存（swap 交换分区）、共享内存和系统缓存的使用情况。<br>其输出和 top 命令的内存部分非常相似。</p>
<p>命令常用的选项及各自的含义</p>
<ul>
<li>-b    以 Byte（字节）为单位，显示内存使用情况。</li>
<li>-k    以 KB 为单位，显示内存使用情况，此选项是 free 命令的默认选项。</li>
<li>-m    以 MB 为单位，显示内存使用情况。</li>
<li>-g    以 GB 为单位，显示内存使用情况。</li>
<li>-t    在输出的最终结果中，输出内存和 swap 分区的总量。</li>
<li>-o    不显示系统缓冲区这一列。</li>
<li>-s 间隔秒数    根据指定的间隔时间，持续显示内存使用情况。</li>
</ul>
<p><img src="/images/blog/2019-07-26-5.png" alt></p>
<p>第一行显示的是各个列的列表头信息，各自的含义如下所示:</p>
<ul>
<li>total 是总内存数</li>
<li>used 是已经使用的内存数</li>
<li>free 是空闲的内存数</li>
<li>shared 是多个进程共享的内存总数</li>
<li>buffers 是缓冲内存数</li>
<li>cached 是缓存内存数</li>
</ul>
<p>Mem 一行指的是内存的使用情况<br>-/buffers/cache 的内存数，相当于第一行的 used-buffers-cached<br>+/buffers/cache 的内存数，相当于第一行的 free+buffers+cached<br>Swap 一行指的就是 swap 分区的使用情况</p>
<p>可以看到，系统的物理内存为 62 GB，已经使用了 48 GB，空闲 14 GB。<br>而 swap 分区总大小为 4 GB，目前尚未使用。</p>
<p>Linux 的内存管理机制的思想包括（不敢说就是）内存利用率最大化，内核会把剩余的内存申请为 cached，而 cached 不属于 free 范畴。</p>
<p>如果 free 的内存不够，内核会把部分 cached 的内存回收，回收的内存再分配给应用程序。</p>
<p>所以对于linux系统，可用于分配的内存不只是free的内存，还包括cached的内存（其实还包括buffers）</p>
<p>可用内存 = free的内存 + cached的内存 + buffers。也就是<code>+/buffers/cache 的内存数</code>的数值</p>
<p>Free 中的 buffer 和 cache，它们都是占用内存</p>
<p>buffers: 作为 buffer cache 的内存，是块设备的读写缓冲区。用于CPU和内存之间的缓冲</p>
<p>cached: 作为 page cache 的内存, 文件系统的 cache。用于内存和硬盘的缓冲</p>
<p>Buffer Cache 和 Page Cache。前者针对磁盘块的读写，后者针对文件 inode 的读写。这些Cache有效缩短了 I/O系统调用(比如read,write,getdents)的时间。磁盘的操作有逻辑级（文件系统）和物理级（磁盘块)</p>
<h4 id="iostat"><a href="#iostat" class="headerlink" title="iostat"></a>iostat</h4><p>iostat 是 I/O statistics（输入/输出统计）的缩写。</p>
<p>iostat也有一个弱点，就是它不能对某个进程进行深入分析，仅对系统的整体情况进行分析。</p>
<p>iostat 常用命令格式 <code>iostat [参数] [时间] [次数]</code></p>
<p>命令参数说明如下:</p>
<ul>
<li>-c 显示CPU使用情况</li>
<li>-d 显示磁盘使用情况</li>
<li>-k 以K为单位显示</li>
<li>-m 以M为单位显示</li>
<li>-N 显示磁盘阵列(LVM) 信息</li>
<li>-n 显示NFS使用情况</li>
<li>-p 可以报告出每块磁盘的每个分区的使用情况</li>
<li>-t 显示终端和CPU的信息</li>
<li>-x 显示详细信息</li>
</ul>
<p>使用示例<code>iostat -x 3</code></p>
<p><img src="/images/blog/2019-08-27-1.png" alt></p>
<p>在日常运维中到底需要关注哪些字段呢？到底该关注哪些输出内容就可以确定这台服务器是否存在IO性能瓶颈。</p>
<p>%iowait: 如果该值较高，表示磁盘存在I/O瓶颈<br>await: 一般地，系统I/O响应时间应该低于5ms，如果大于10ms就比较大了<br>avgqu-sz: 如果I/O请求压力持续超出磁盘处理能力，该值将增加。如果单块磁盘的队列长度持续超过2，一般认为该磁盘存在I/O性能问题。需要注意的是，如果该磁盘为磁盘阵列虚拟的逻辑驱动器，需要再将该值除以组成这个逻辑驱动器的实际物理磁盘数目，以获得平均单块硬盘的I/O等待队列长度<br>%util: 一般地，如果该参数是100%表示设备已经接近满负荷运行了 </p>
<p>具体使用参考自<a href="https://www.jellythink.com/archives/438" target="_blank" rel="noopener">Linux iostat命令详解</a></p>
<h4 id="fdisk"><a href="#fdisk" class="headerlink" title="fdisk"></a>fdisk</h4><p><code>fdisk -l</code> 显示当前分区情况</p>
<p>分区是将一个硬盘驱动器分成若干个逻辑驱动器，分区是把硬盘连续的区块当做一个独立的磁盘使用。分区表是一个硬盘分区的索引,分区的信息都会写进分区表。</p>
<p>fdisk 主要对硬盘做分区操作。<code>fdisk /dev/vda</code>，具体操作自行搜索。</p>
<p>在使用硬盘之前必须对其分区进行格式化,并挂载。</p>
<p><img src="/images/blog/2019-11-30-1.png" alt></p>
<h4 id="lsblk"><a href="#lsblk" class="headerlink" title="lsblk"></a>lsblk</h4><p>lsblk 命令默认情况下将以树状列出所有块设备</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NAME   MAJ:MIN RM SIZE RO TYPE MOUNTPOINT</span><br><span class="line">vda    253:0    0  40G  0 disk</span><br><span class="line">└─vda1 253:1    0  40G  0 part &#x2F;</span><br></pre></td></tr></table></figure>

<p>7个栏目名称如下: </p>
<ul>
<li>NAME: 这是块设备名。  </li>
<li>MAJ:MIN: 本栏显示主要和次要设备号。</li>
<li>RM: 本栏显示设备是否可移动设备。注意，如果RM值等于1，这说明他们是可移动设备。</li>
<li>SIZE: 本栏列出设备的容量大小信息。例如298.1G表明该设备大小为298.1GB，而1K表明该设备大小为1KB。</li>
<li>RO: 该项表明设备是否为只读。在本案例中，所有设备的RO值为0，表明他们不是只读的。</li>
<li>TYPE: 本栏显示块设备是否是磁盘或磁盘上的一个分区。disk 是磁盘，part是分区</li>
<li>MOUNTPOINT: 本栏指出设备挂载的挂载点。</li>
</ul>
<p><strong>lsblk和df命令区别</strong></p>
<p>lsblk 查看的是block device,也就是逻辑磁盘大小。</p>
<p>df查看的是file system, 也就是文件系统层的磁盘大小。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp144crtihiqovt4h5m4Z ~]# df -lh</span><br><span class="line">文件系统        容量  已用  可用 已用% 挂载点</span><br><span class="line">&#x2F;dev&#x2F;vda1        40G  2.4G   35G    7% &#x2F;</span><br><span class="line">devtmpfs        911M     0  911M    0% &#x2F;dev</span><br><span class="line">tmpfs           920M     0  920M    0% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs           920M  308K  920M    1% &#x2F;run</span><br><span class="line">tmpfs           920M     0  920M    0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">tmpfs           184M     0  184M    0% &#x2F;run&#x2F;user&#x2F;0</span><br></pre></td></tr></table></figure>

<h4 id="pwdx"><a href="#pwdx" class="headerlink" title="pwdx"></a>pwdx</h4><p>查看Linux程序的工作目录</p>
<p>在日常的工作中，尤其是测试机上，经常会看到多个相似的进程同时运行。有时候，需要针对其中1-2个进程进行操作，比如杀掉，也会经常担心杀错。pwdx命令，可以有效的解决这方面的问题。</p>
<p>同时使用 pwdx 命令根据 pid 找到业务进程路径，进而定位到负责人和项目</p>
<p>利用进程号作为参数，可以打印出指定进程号的工作目录，帮助我们区分不同的进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@iZbp144crtihiqovt4h5m4Z ~]# pwdx 27594</span><br><span class="line">27594: &#x2F;usr&#x2F;local&#x2F;aegis&#x2F;aegis_client&#x2F;aegis_10_75</span><br></pre></td></tr></table></figure>

<h4 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h4><p>sed 是一种流编编器，它是文本处理中非常中的工具，能够完美的配合正则表达式便用，功物能不同凡响</p>
<p>处理时，把当前处理的行存储在临时缓冲区中，称为”模式空间”（ oattern space），接看用sed命令处理缓冲区中的内容，处理成后，把缓冲区的内容送往屏幕显示。接着理下一行，这样不断重复，直到文件末。文件内容没有改改变，除非使用了写入的命令，将内容更新。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 打印整个文件</span><br><span class="line">sed -n &#39;1,$p&#39; lihm.py</span><br><span class="line"></span><br><span class="line"># 全局替换字符串</span><br><span class="line">sed &quot;s&#x2F;abc&#x2F;gcd&#x2F;g&quot; lihm.py</span><br><span class="line"></span><br><span class="line"># 删除行头空格键和tab键</span><br><span class="line">sed -i &#39;s&#x2F;^[ \t]*&#x2F;&#x2F;g&#39; lihm.py</span><br><span class="line"></span><br><span class="line"># 删除行尾空格</span><br><span class="line">sed -i &#39;s&#x2F;[ \t]*$&#x2F;&#x2F;g&#39; lihm.py</span><br></pre></td></tr></table></figure>

<p>^[  \t] 是以空格或者tab键开头   –  与[^]不同，[^]是匹配除[^字符]之外的任意字符，例如5[^12]，匹配50、53、54，但是不匹配51和52<br>* 是代表匹配0到多次<br>$ 行尾标志</p>
<p>更多的使用自行搜索</p>
<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><p>默认以空格分隔，下方示例都指定按分隔符分隔</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 以第三列排序</span><br><span class="line">sort -t $&#39;\t&#39; -k3 system.txt  </span><br><span class="line"></span><br><span class="line"># 以第三列数字排序，第二列默认字符排序且r表示降序排序</span><br><span class="line">sort -t $&#39;\t&#39; -k3n -k2r system.txt</span><br></pre></td></tr></table></figure>

<p>更多查看<a href="https://www.cnblogs.com/itxiongwei/p/8528838.html" target="_blank" rel="noopener">Linux文件排序工具 sort 命令详解</a></p>
<h4 id="stat"><a href="#stat" class="headerlink" title="stat"></a>stat</h4><p>stat 命令主要用于显示文件或文件系统的详细信息</p>
<p>显示文件信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@TENCENT64 ~]# stat Changelog</span><br><span class="line">  File: ‘Changelog’</span><br><span class="line">  Size: 1598      	Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: fd01h&#x2F;64769d	Inode: 1579435     Links: 1</span><br><span class="line">Access: (0644&#x2F;-rw-r--r--)  Uid: (    0&#x2F;    root)   Gid: (    0&#x2F;    root)</span><br><span class="line">Access: 2018-11-06 22:39:54.110931887 +0800</span><br><span class="line">Modify: 2018-11-06 22:39:54.110931887 +0800</span><br><span class="line">Change: 2018-11-06 23:07:14.428548887 +0800</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure>

<p>信息解释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">File: ‘Changelog’: 文件名称为Changelog</span><br><span class="line">Size: 1598: 文件大小1598字节</span><br><span class="line">Blocks: 8: 物理最小块是512，即扇区，而 IO Block 为4096，所以这里就占用了8个物理块的意思</span><br><span class="line">IO Block: 4096: 逻辑块的大小为4096个字节</span><br><span class="line">regular file: 文件类型（普通文件）</span><br><span class="line">Device: fd01h&#x2F;64769d: 文件所在设备号，分别以十六进制和十进制显示</span><br><span class="line">Inode: 1579435: 文件节点号</span><br><span class="line">Links: 1: 硬链接数</span><br><span class="line">Access: (0644&#x2F;-rw-r--r--): 访问权限</span><br><span class="line">Uid: 所有者ID与名称</span><br><span class="line">Gid: 所有者用户组ID与名称</span><br><span class="line">Access: access time 简写</span><br><span class="line">Modify: modify time 简写</span><br><span class="line">Change: change time 简写</span><br><span class="line">Birth -: 无法获知文件创建时间。注意：Linux下的文件未存储文件创建时间</span><br></pre></td></tr></table></figure>
<p>Linux 三种时间介绍: </p>
<ul>
<li>atime:（access time）显示的是文件中的数据最后被访问的时间，比如系统的进程直接使用或通过一些命令和脚本间接使用。（执行一些可执行文件或脚本）    </li>
<li>mtime:（modify time）显示的是文件内容被修改的最后时间，比如用vi编辑时就会被改变。（也就是Block的内容）  </li>
<li>ctime:（change time）显示的是文件的权限、拥有者、所属的组、链接数发生改变时的时间。当然当内容改变时也会随之改变（即inode内容发生改变和Block内容发生改变时）</li>
</ul>
<blockquote>
<p>有一个要注意的就是，在kernel 2.6.30之前，文件系统中默认会及时的更新atime，而在此之后的版本里有变化<br>Linux atime修改策略与 mount 有关，可选的值有 noatime、relatime 和 strictatime</p>
<ul>
<li>noatime: atime不会被更新，即使修改了文件内容</li>
<li>relatime:<ul>
<li>如果一个文件的 atime 比 ctime 或 mtime 更早，此时你去读取了该文件，atime 才会被更新为当前时间。</li>
<li>atime 比现在早一天，那么 atime 在文件读取时会被更新</li>
</ul>
</li>
<li>strictatime: atime 在文件每次被读取时，都能够被更新</li>
</ul>
<p>所以只有发生以下三种情况之一才会更新atime</p>
<ul>
<li>将分区 mount 的挂载的时候指定采用非 relatime 方式，使用方法就是通过<code>mount -o relatime /dir</code>来挂装目录</li>
<li>atime 小于 ctime 或者小于 mtime 的时候</li>
<li>本次的 access time 和上次的 atime 超过24个小时</li>
</ul>
</blockquote>
<p>显示文件所在文件系统信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@TENCENT64 &#x2F;data&#x2F;vas_pgg_proj&#x2F;apps&#x2F;penguin_game]# stat -f Makefile</span><br><span class="line">  File: &quot;Makefile&quot;</span><br><span class="line">    ID: 6f75a4f02634e23e Namelen: 255     Type: ext2&#x2F;ext3</span><br><span class="line">Block size: 4096       Fundamental block size: 4096</span><br><span class="line">Blocks: Total: 43830967   Free: 30155578   Available: 27923259</span><br><span class="line">Inodes: Total: 11162880   Free: 11077199</span><br></pre></td></tr></table></figure>

<p>信息解释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">File: &quot;Makefile&quot;: 文件名称为&quot;Makefile&quot;；</span><br><span class="line">ID: 6f75a4f02634e23e: 文件系统ID</span><br><span class="line">Namelen: 255: 最大文件名称长度</span><br><span class="line">Type: ext2&#x2F;ext3: 文件系统类型名称</span><br><span class="line">Block size: 4096: 块大小为4096字节</span><br><span class="line">Fundamental block size: 4096: 基本块大小为4096字节</span><br><span class="line">Blocks: Total: 43830967   Free: 30155578   Available: 27923259</span><br><span class="line">Inodes: Total: 11162880   Free: 11077199</span><br></pre></td></tr></table></figure>

<h4 id="file"><a href="#file" class="headerlink" title="file"></a>file</h4><p>file 命令用于辨识文件类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">file  &#x2F;var&#x2F;log&#x2F;secure*    --&gt;显示是二进制文件</span><br><span class="line">file &#x2F;var&#x2F;log&#x2F;lastlog      --&gt;显示是data文件   --&gt;不能cat –&gt; 只能last命令查看</span><br></pre></td></tr></table></figure>

<p><a href="https://www.cnblogs.com/ftl1012/p/file.html" target="_blank" rel="noopener">shell 脚本小工具之万能解压和压缩器</a></p>
<h4 id="type"><a href="#type" class="headerlink" title="type"></a>type</h4><p>type 命令用来显示指定命令的类型，判断给出的指令是内部指令还是外部指令。</p>
<blockquote>
<p>命令类型<br>alias: 别名<br>keyword: 关键字，Shell保留字<br>function: 函数，Shell函数<br>builtin: 内建命令，Shell内建命令<br>file: 文件，磁盘文件，外部命令<br>unfoundL 没有找到  </p>
</blockquote>
<p>选项<br>-t: 输出“file”、“alias”或者“builtin”，分别表示给定的指令为“外部指令”、“命令别名”或者“内部指令”；<br>-p: 如果给出的指令为外部指令，则显示其绝对路径；<br>-a: 在环境变量“PATH”指定的路径中，显示给定指令的信息，包括命令别名。</p>
<h4 id="last"><a href="#last" class="headerlink" title="last"></a>last</h4><p>last 作用是显示近期用户或终端的登录情况。通过 last 命令查看该程序的 log，管理员可以获知谁曾经或者企图连接系统。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@region-168-1-228 opt]# last</span><br><span class="line">root     pts&#x2F;0        region-168-1-240 Fri Jan 17 10:58   still logged in   </span><br><span class="line">root     pts&#x2F;1        region-168-1-240 Thu Jan 16 21:11 - 05:29  (08:17)    </span><br><span class="line">root     pts&#x2F;0        region-168-1-227 Thu Jan 16 20:48 - 05:31  (08:42)    </span><br><span class="line">root     pts&#x2F;1        192.168.1.254    Wed Jan 15 15:36 - 22:16  (06:39)</span><br></pre></td></tr></table></figure>


<hr>
<p>参考链接</p>
<ul>
<li><a href="https://mp.weixin.qq.com/s/eDL4-XJZO4Y8Hs4U0bCcnQ" target="_blank" rel="noopener">阿里员工排查问题的工具清单，总有一款适合你！</a></li>
<li><a href="https://mp.weixin.qq.com/s/f_yEBXHjC_v-PlcrFi9ryQ" target="_blank" rel="noopener">运维技巧之逼格高又实用的Linux命令</a></li>
<li><a href="https://www.cnblogs.com/fuqu/p/10230385.html" target="_blank" rel="noopener">Linux top命令的用法详细详解1</a></li>
<li><a href="https://www.cnblogs.com/zhoug2020/p/6336453.html" target="_blank" rel="noopener">Linux top命令的用法详细详解2</a></li>
<li><a href="http://c.biancheng.net/view/1083.html" target="_blank" rel="noopener">Linux free命令：查看内存使用状态</a></li>
<li><a href="https://mp.weixin.qq.com/s/wPBILQSl8-OVNYcJN9cBRg" target="_blank" rel="noopener">工作中常用到的Linux命令</a></li>
<li><a href="https://blog.csdn.net/zhangchenglikecc/article/details/52103737" target="_blank" rel="noopener">top命令输出解释以及load average 详解及排查思路</a></li>
<li><a href="https://www.jellythink.com/archives/438" target="_blank" rel="noopener">Linux iostat命令详解</a></li>
<li><a href="https://blog.csdn.net/u013184884/article/details/82993286" target="_blank" rel="noopener">利用pwdx查看Linux程序的工作目录</a></li>
<li><a href="https://mp.weixin.qq.com/s/Mb4E7GvfsKJapEyaZQl8_w" target="_blank" rel="noopener">Linux 系统监控、诊断工具之 IO wait</a></li>
<li><a href="https://blog.csdn.net/ryu2003/article/details/80324467" target="_blank" rel="noopener">Linux 下磁盘和CPU、内存、网络监控工具</a></li>
<li><a href="https://blog.csdn.net/K346K346/article/details/83832834" target="_blank" rel="noopener">Linux 命令（48）—— stat 命令</a></li>
<li><a href="https://www.cnblogs.com/klb561/p/9241228.html" target="_blank" rel="noopener">Linux系统stat指令用法</a></li>
<li><a href="https://www.cnblogs.com/ftl1012/p/file.html" target="_blank" rel="noopener">shell 脚本小工具之万能解压和压缩器</a></li>
<li><a href="https://blog.csdn.net/wodeqingtian1234/article/details/53975744" target="_blank" rel="noopener">linux中三种time（atime,mtime,ctime）</a></li>
<li><a href="https://www.cnblogs.com/qiaopei/p/5515189.html" target="_blank" rel="noopener">Linux常用命令之 查找命令 find —— 细说 -atime，-mtime，-ctime</a></li>
<li><a href="http://bigdatadecode.club/HDFS%E4%B8%ADatime%E5%92%8Cmtime.html" target="_blank" rel="noopener">HDFS中atime与mtime解析</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/06/25/HBase-Flush/" rel="prev" title="HBase Flush 时机">
      <i class="fa fa-chevron-left"></i> HBase Flush 时机
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/06/27/HBase-IO-Case/" rel="next" title="HBase Region 过多导致集群问题事件">
      HBase Region 过多导致集群问题事件 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#lsb-release"><span class="nav-number">2.</span> <span class="nav-text">lsb_release</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#uname"><span class="nav-number">3.</span> <span class="nav-text">uname</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#crontab"><span class="nav-number">4.</span> <span class="nav-text">crontab</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bc"><span class="nav-number">5.</span> <span class="nav-text">bc</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ps"><span class="nav-number">6.</span> <span class="nav-text">ps</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#netstat"><span class="nav-number">7.</span> <span class="nav-text">netstat</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#lsof"><span class="nav-number">8.</span> <span class="nav-text">lsof</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tail"><span class="nav-number">9.</span> <span class="nav-text">tail</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#grep"><span class="nav-number">10.</span> <span class="nav-text">grep</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#awk"><span class="nav-number">11.</span> <span class="nav-text">awk</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#find"><span class="nav-number">12.</span> <span class="nav-text">find</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#top"><span class="nav-number">13.</span> <span class="nav-text">top</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#free"><span class="nav-number">14.</span> <span class="nav-text">free</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iostat"><span class="nav-number">15.</span> <span class="nav-text">iostat</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fdisk"><span class="nav-number">16.</span> <span class="nav-text">fdisk</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#lsblk"><span class="nav-number">17.</span> <span class="nav-text">lsblk</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pwdx"><span class="nav-number">18.</span> <span class="nav-text">pwdx</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sed"><span class="nav-number">19.</span> <span class="nav-text">sed</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sort"><span class="nav-number">20.</span> <span class="nav-text">sort</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#stat"><span class="nav-number">21.</span> <span class="nav-text">stat</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#file"><span class="nav-number">22.</span> <span class="nav-text">file</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#type"><span class="nav-number">23.</span> <span class="nav-text">type</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#last"><span class="nav-number">24.</span> <span class="nav-text">last</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="图"
      src="/images/zzh.jpg">
  <p class="site-author-name" itemprop="name">图</p>
  <div class="site-description" itemprop="description">Life isn't always what one likes.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">192</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i>RSS</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/lihuimintu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lihuimintu" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:lihuimintu@gmail.com" title="E-Mail → mailto:lihuimintu@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">图</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">470k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">7:07</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '2099ede60a4e9fcf1a9b',
      clientSecret: '9cc2ee09ee4a85b2781480ddb339b0f9354b84b4',
      repo: 'lihuimintu.github.io',
      owner: 'lihuimintu',
      admin: ['lihuimintu'],
      id: '3bed22b22f9d3e70a4999e7942de88fa',
        language: 'zh-CN',
      distractionFreeMode: false
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

  <!-- 代码块复制功能 -->
  <script type="text/javascript" src="/js/clipboard.min.js"></script>	
<script type="text/javascript" src="/js/custom.js"></script>

</body>
</html>
